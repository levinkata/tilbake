@model QuoteResource
@{
    ViewData["Title"] = "Quotation";
    Layout = "~/Views/Shared/_Layout.cshtml";

    var subTotal = 0M;
    var taxAmount = 0M;
    var totalAmount = 0M;
    var taxRate = ViewBag.TaxRate;    
    var FullName = String.IsNullOrEmpty(Model.Client.FirstName) ? Model.Client.LastName : Model.Client.FirstName + " " + Model.Client.LastName;
}

<div class="container mt-3 w-75">
    <div class="card p-5">
        <div class="card-body">
            <div class="row d-flex justify-content-around">
                <div class="col d-flex justify-content-around">
                    <img src="~/images/SmallLogo.png" class="img-fluid rounded float-start" alt="Company Logo">
                </div>
                <div class="col pt-3text-end">
                    <h1>Quote</h1>
                </div>
            </div>
            <div class="row justify-content-around mb-3">
                <div class="col">
                    <p>[Street Address]</p>
                    <p>[City, State, ZIP Code]</p>
                    <p>[Phone]</p>
                    <p>[Email Address]</p>
                    <p>[Company Website]</p>
                </div>
                <div class="col text-end">
                    <div class="row">
                        <div class="col justify-content-end">
                            Date:
                        </div>
                        <div class="col-4 text-left">
                            @Model.QuoteDate.ToString("dd/MM/yyyy")
                        </div>
                    </div>
                    <div class="row">
                        <div class="col justify-content-end">
                            Quote Number:
                        </div>
                        <div class="col-4 text-left">
                            @Model.QuoteNumber
                        </div>
                    </div>
                </div>
            </div>
            <div class="row justify-content-around mb-3">
                <div class="col">
                    <p class="p-2 bg-primary text-white">BILL TO</p>
                    <p>@FullName</p>
                    <p>[Street Address]</p>
                    <p>[City, State, ZIP Code]</p>
                    <p>[Phone]</p>
                </div>
                <div class="col"></div>
                <div class="col"></div>
                <div class="col">
                    <p class="p-2 bg-primary text-white">SHIP TO</p>
                    <p>@FullName</p>
                    <p>[Street Address]</p>
                    <p>[City, State, ZIP Code]</p>
                    <p>[Phone]</p>
                </div>
            </div>
            @if (Model.QuoteItems.Any())
            {
                <div class="form-group">
                    <table id="tblQuoteItems" class="table table-borderless">
                        <thead>
                            <tr class="bg-primary text-white">
                                <th>
                                    Description
                                </th>
                                <th>
                                    Sum Insured
                                </th>
                                <th>
                                    Premium
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model.QuoteItems)
                            {
                                <tr>
                                    <td>@item.Description</td>
                                    <td>@item.SumInsured.ToString("C2")</td>
                                    <td class="text-right">@item.Premium.ToString("C2")</td>
                                </tr>
                                subTotal = subTotal + @item.Premium;
                                taxAmount = subTotal * taxRate/100;
                                totalAmount = subTotal + taxAmount;
                            }
                        </tbody>
                        @if (subTotal > 0)
                        {
                        <tfoot>
                            <tr class="border-top">
                                <td colspan="2" class="text-right"><strong>Sub total</strong></td>
                                <td class="text-right">@subTotal.ToString("C2")</td>
                            </tr>
                            <tr>
                                <td colspan="2" class="text-right"><strong>VAT (@taxRate)</strong></td>
                                <td class="text-right">@taxAmount.ToString("C2")</td>
                            </tr>
                            <tr class="border-top">
                                <td colspan="2" class="text-right"><strong>Total</strong></td>
                                <td class="border-bottom border-5 border-dark text-right">@totalAmount.ToString("C2")</td>
                            </tr>
                        </tfoot>
                        }
                    </table>
                </div>
            }
            else
            {
                <caption>No Records Found</caption>
            }
            <div class="row ">
                <div class="mt-3">
                    <p class="p-2 bg-primary text-white">COMMENTS</p>
                    <p>1. Payment due in 30 days</p>
                    <p>2. Please note the invoice number in your payment method</p>
                    <br />
                    <p>Banking and wire transfer informatoin may also be included here</p>
                    <br />
                    <p class="fw-bolder">Thank you for your business!</p>
                </div>
            </div>
        </div>
    </div>
</div>